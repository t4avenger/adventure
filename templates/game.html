{{define "game.html"}}
  <div class="stats-update" data-strength="{{.State.Stats.Strength}}" data-luck="{{.State.Stats.Luck}}" data-health="{{.State.Stats.Health}}" style="display: none;"></div>
  {{if gt .State.EnemyHealth 0}}
  <div class="enemy-update" data-enemy-name="{{.State.EnemyName}}" data-enemy-strength="{{.State.EnemyStrength}}" data-enemy-health="{{.State.EnemyHealth}}" style="display: none;"></div>
  {{else}}
  <div class="enemy-update" data-enemy-name="" data-enemy-strength="0" data-enemy-health="0" style="display: none;"></div>
  {{end}}

  <div class="story-area">
    <div class="story-content">
      {{if .Message}}<p class="msg">{{.Message}}</p>{{end}}

      {{if .LastRoll}}
        <p class="roll">Roll: <strong>{{.LastRoll}}</strong> {{if .LastOutcome}}({{.LastOutcome}}){{end}}</p>
      {{end}}

      <p class="text">{{.Node.Text}}</p>

      {{if .Node.Ending}}
        <p class="end">— The End —</p>
      {{end}}

      <!-- Placeholder for future images/animations -->
      <div class="story-media"></div>
    </div>
  </div>

  {{if .Node.Ending}}
    <div class="choices-area">
      <button class="btn"
        onclick="window.location.href='/start'">
        Restart
      </button>
    </div>
  {{else}}
    <div class="choices-area">
      <ul class="choices">
        {{range .Node.Choices}}
          <li>
            <button class="btn"
              hx-post="/play"
              hx-target="#game"
              hx-swap="innerHTML"
              hx-vals='{"choice":"{{.Key}}"}'>
              {{.Text}}
            </button>
          </li>
        {{end}}
      </ul>
    </div>
  {{end}}
{{end}}
